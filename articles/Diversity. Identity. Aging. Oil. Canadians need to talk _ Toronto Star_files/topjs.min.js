(function(b,a){$window=b(a);
b.fn.lazyload=function(c){var e=this;
var d={threshold:0,failure_limit:0,event:"scroll",effect:"show",container:a,data_attribute:"original",skip_invisible:true,appear:null,load:null};
function f(){var g=0;
e.each(function(){var h=b(this);
if(d.skip_invisible&&!h.is(":visible")){return
}if(b.abovethetop(this,d)||b.leftofbegin(this,d)){}else{if(!b.belowthefold(this,d)&&!b.rightoffold(this,d)){h.trigger("appear")
}else{if(++g>d.failure_limit){return false
}}}})
}if(c){if(undefined!==c.failurelimit){c.failure_limit=c.failurelimit;
delete c.failurelimit
}if(undefined!==c.effectspeed){c.effect_speed=c.effectspeed;
delete c.effectspeed
}b.extend(d,c)
}$container=(d.container===undefined||d.container===a)?$window:b(d.container);
if(0===d.event.indexOf("scroll")){$container.bind(d.event,function(g){return f()
})
}this.each(function(){var g=this;
var h=b(g);
g.loaded=false;
h.one("appear",function(){if(!this.loaded){if(d.appear){var i=e.length;
d.appear.call(g,i,d)
}b("<img />").bind("load",function(){h.hide().attr("src",h.data(d.data_attribute))[d.effect](d.effect_speed);
g.loaded=true;
var j=b.grep(e,function(l){return !l.loaded
});
e=b(j);
if(d.load){var k=e.length;
d.load.call(g,k,d)
}}).attr("src",h.data(d.data_attribute))
}});
if(0!==d.event.indexOf("scroll")){h.bind(d.event,function(i){if(!g.loaded){h.trigger("appear")
}})
}});
$window.bind("resize",function(g){f()
});
f();
return this
};
b.belowthefold=function(d,e){var c;
if(e.container===undefined||e.container===a){c=$window.height()+$window.scrollTop()
}else{c=$container.offset().top+$container.height()
}return c<=b(d).offset().top-e.threshold
};
b.rightoffold=function(d,e){var c;
if(e.container===undefined||e.container===a){c=$window.width()+$window.scrollLeft()
}else{c=$container.offset().left+$container.width()
}return c<=b(d).offset().left-e.threshold
};
b.abovethetop=function(d,e){var c;
if(e.container===undefined||e.container===a){c=$window.scrollTop()
}else{c=$container.offset().top
}return c>=b(d).offset().top+e.threshold+b(d).height()
};
b.leftofbegin=function(d,e){var c;
if(e.container===undefined||e.container===a){c=$window.scrollLeft()
}else{c=$container.offset().left
}return c>=b(d).offset().left+e.threshold+b(d).width()
};
b.inviewport=function(c,d){return !b.rightofscreen(c,d)&&!b.leftofscreen(c,d)&&!b.belowthefold(c,d)&&!b.abovethetop(c,d)
};
b.extend(b.expr[":"],{"below-the-fold":function(c){return b.belowthefold(c,{threshold:0,container:a})
},"above-the-top":function(c){return !b.belowthefold(c,{threshold:0,container:a})
},"right-of-screen":function(c){return b.rightoffold(c,{threshold:0,container:a})
},"left-of-screen":function(c){return !b.rightoffold(c,{threshold:0,container:a})
},"in-viewport":function(c){return !b.inviewport(c,{threshold:0,container:a})
},"above-the-fold":function(c){return !b.belowthefold(c,{threshold:0,container:a})
},"right-of-fold":function(c){return b.rightoffold(c,{threshold:0,container:a})
},"left-of-fold":function(c){return !b.rightoffold(c,{threshold:0,container:a})
}})
})(jQuery,window);
(function(c){var a=null,b=0,d=false;
c.fn.getMaxSize=function(g,i,f){if(!f){f={width:0,height:0}
}var e=(g==undefined)?0:(parseInt(g)||0),h=(i==undefined)?0:(parseInt(i)||0);
this.each(function(){var j=c(this).outerWidth(),k=c(this).outerHeight();
if(j>f.width&&(!e||j<e)){f.width=j
}if(k>f.height&&(!h||j<h)){f.height=k
}f=c(this).children().getMaxSize(g,i,f)
});
return f
};
c.fn.putInTheMiddle=function(){return this.each(function(){var g=c(this),e,f=g.parent().width()-g.outerWidth(),h=g.parent().height()-g.outerHeight();
if(isFinite(f)&&f>1){e=Math.floor(f/2)+"px";
g.css({"margin-left":e,"margin-right":e})
}if(isFinite(h)&&h>1){e=Math.floor(h/2)+"px";
g.css({"margin-top":e,"margin-bottom":e})
}})
};
c.fn.fitOuterWidth=function(){return this.each(function(){var f=c(this),e=f.width(),g=f.outerWidth();
if(isFinite(e)&&isFinite(g)&&g>e){e-=g-e;
if(e>0){f.width(e)
}}})
};
c.repr=function(g,l){var q=typeof g,m=parseInt(l)||0;
switch(q){case"string":return(b)?'"'+g+'"':g;
case"object":if(!g||(m<b)){break
}var n=[];
b++;
for(var f in g){if(!g.hasOwnProperty(f)){continue
}var r;
try{r=c.repr(g[f],l)
}catch(k){}n.push(f+": "+r)
}b--;
return"{"+n.join(", ")+"}";
case"array":if(m<b){break
}var n=[],j=g.length;
b++;
for(var h=0;
h<j;
h++){n.push(c.repr(g[h],l))
}b--;
return"["+n.join(", ")+"]"
}return""+g
};
c.log=function(i){if(window.console){var e=function(j){return(j<10)?"0"+j:""+j
},h=new Date,f=e(h.getHours())+":"+e(h.getMinutes())+":"+e(h.getSeconds()),g=f+" "+c.repr(i);
window.console.log(g)
}};
c.dbg=function(g,e){var f=(typeof e=="undefined")?d:!!e;
if(f){c.log(g)
}};
c.yes=function(e){if(typeof e!="string"){return !!e
}var f="0,no,false,none,nope,null,nil";
if(""===c.trim(e)||c.inArray(e.toLowerCase(),f.split(/\W+/g))>=0){return false
}return true
};
c.getQueryMap=function(){if(a===null){a={};
if(window.location.search){var f=window.location.search.substr(1).split("&"),e=f.length;
for(var g=0;
g<e;
g++){var h=f[g].split("=");
a[h[0]]=(typeof h[1]=="undefined")?null:decodeURIComponent(h[1].replace(/\+/g,"%20"))
}}}return a
};
c.getQueryParam=function(e,g){var f=c.getQueryMap();
return(f&&(e in f))?f[e]:g
};
c.isDebug=function(){return d
};
c(function(){d=!!c.getQueryParam("debug",false)||!!c.getQueryParam("dbg",false)
})
})(jQuery);
(function(f){var j="object, embed, img",g=false,b=function(p){f.dbg("adloadhandler: "+p)
},d=function(){return f("body").is(".homepage")
},i=function(q){try{f(q).appendTo(f("body"))
}catch(p){}},c=function(q){var p=typeof q;
switch(p){case"string":return f(q);
case"object":if(!q){return f()
}if("nodeType" in q){return f(q)
}if("selector" in q){return q
}}return f()
},o=function(q){var p=c(q);
return{width:p.width(),height:p.height()}
},h=function(r,s){var q=c(r),p=s||{width:0,height:0};
q.each(function(){var u=f(this),t=u.width(),v=u.height();
if(t>p.width){p.width=t
}if(v>p.height){p.height=v
}u.children().each(function(){p=h(this,p)
})
});
return p
},l=function(r){var p=c(r),q=20;
if(!p.length){return false
}if(p.find(j).getMaxSize().height>=q||p.find("iframe").not(":hidden").contents().find(j).getMaxSize().height>=q){return true
}return false
},m=function(p){return !l(p)
},a=function(s){var r=c(s),q=r.find("iframe").not(":hidden"),p=(q.length)?q.contents().find("div"):r.find("div");
return(p.length&&p.length==p.filter(":hidden").length);
if(!r.length){return false
}},e=function(t){if(!d()){return
}if(!t){return
}var u=t.width,r=t.height,A=(u>=400),v=(u<=300),z=(r>=590),x=(r>=1000);
if(!A&&!z){return
}b("Starting component mover. Ad size: "+u+"x"+r);
var s=f("div.right-rail").find("div.rightrailtop, div.toprightrail");
if(x){if(v){f("div.right-rail div.editors-picks").parent().prependTo("div.homepage-more div.middle-col div.centerrail")
}s.children().not("div.dfpad").remove();
if(!A){f("div.homepage-more div.rightrail .mostpopular").wrap("<li/>").appendTo(".homepage-top .more-headlines");
var q=f("div.headlines").height()-Math.max(f(".homepage-top .more-headlines").height(),r);
f("div.homepage-more div.left-col").css({"border-right":"7px #fff solid","margin-right":"2px",position:"relative","background-color":"white",top:q});
f("div.homepage-more div.left-col div.leftrail").css({"border-top":"1px #ccc dotted"})
}}else{if(z){if(A){var p=f("div.homepagetop ul.more-headlines").find("li").filter(function(){return((f(this).attr("data-thumbnail")!=undefined&&f(this).attr("data-thumbnail").length)||f(this).find("a.thumbnail img").length)
}),w=p.length;
if(w){if(w>3){p=p.slice(0,3)
}var y=f("<ul/>").addClass("row float-clear xxl");
p.each(function(){var B=f(this),D=B.attr("data-thumbnail");
if(D){var C=f("<img/>").attr("src",D).attr("alt","");
B.find("a.thumbnail").append(C).css("border","0")
}y.append(B)
});
f("div.homepagetop div.headlines").append(y)
}if(!f("ul.xxl li.more-stories").length){f('<ul class="row float-clear xxl"><li class="more-stories"><a class="headline" href="http://thestar.com/news.html">More news stories...</a></li></ul>').appendTo("div.homepagetop div.headlines")
}f("div.homepagetop ul.more-headlines").remove();
f("div.homepage-main").addClass("white-background");
f("div.homepage-main-wrap div.homepage-main .features").width(395);
s.find("div.videoring, div.homepagesinglevideo").css({"margin-top":"10px",width:u+"px"});
s.find(".videoring-placeholder").repaintVideoRing();
f("div.homepage-main-wrap div.homepage-main div.right-rail").css({overflow:"visible",border:"none"})
}f("div.right-rail div.editors-picks").parent().prependTo("div.homepage-more div.middle-col div.centerrail");
if(f(".homepage-main-wrap div.homepage-more").length){f("div.homepage-more").insertAfter(f(".homepage-main-wrap"))
}s.children().not("div.dfpad, div.videoring, div.homepagesinglevideo").remove()
}}f(window).trigger("pageisdone")
},k=function(q){q+="";
var p=f.trim(q).split(/\D+/g);
if(p.length!=2){return null
}return{width:parseInt(p[0]),height:parseInt(p[1])}
},n=function(q){if(!q.size||!q.slot.domId){return
}var v=q.slot.domId,u=f("#"+v),p=u.find("iframe"),t=p.contents(),r=t.find("body"),s=k(q.size);
b("Checking DFP slot "+v+", size: "+q.size);
if(u.is(".gpt-oop")){r.children().appendTo(u);
t.find("head script").appendTo("head");
f(window).on("click","body",function(w){if("BODY"==w.target.nodeName){r.trigger("click")
}});
f("div.header-ads").removeClass("opaque");
b("Taking "+v+" out of iframe")
}else{if(d()&&u.is("div.rightrailtop .gpt-bigbox")){e(s)
}else{if(u.is(".gpt-superbutton, .gpt-bigbox")){setTimeout(function(){if(a(u)){b("slot "+v+" is empty!");
u.hide()
}},1000)
}}}u.addClass("ready")
};
window.onGptSlotReady=function(p){if(g){n(p)
}else{f(function(){n(p)
})
}};
f(function(){g=true;
document.write=i;
setTimeout(function(){if(m(".header-ads")){f(".header-ads").hide();
b("header ads off")
}},5000)
})
})(jQuery);
$(function(){$("img[data-original]").each(function(){if($.belowthefold(this,{threshold:400,container:window})){$(this).attr("data-below-fold","true")
}}).lazyload({failure_limit:40,threshold:400,skip_invisible:false,load:function(){$(this).removeAttr("data-original").attr("data-lazy-loaded","true")
}})
});